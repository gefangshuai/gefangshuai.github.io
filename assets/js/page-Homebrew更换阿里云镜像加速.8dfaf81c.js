(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{501:function(s,e,a){"use strict";a.r(e);var r=a(1),t=Object(r.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("本方案长期保持有效，如发现不可用，请在下面留言。")])]),s._v(" "),a("p",[s._v("你可能有过这样糟糕的经历，当敲下 "),a("code",[s._v("brew install 应用名称")]),s._v(" ，静静的等待安装结果时，Homebrew 在 Updating 的地方卡死了。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Homebrew"),a("OutboundLink")],1),s._v(" 是一款 Mac OS 平台下的软件包管理工具，拥有安装、卸载、更新、查看、搜索等很多实用的功能。简单的一条指令，就可以实现包管理，而不用你关心各种依赖和文件路径的情况，十分方便快捷。")]),s._v(" "),a("blockquote",[a("p",[s._v("安装请见： "),a("a",{attrs:{href:"https://learnku.com/mac/wikis/37923",target:"_blank",rel:"noopener noreferrer"}},[s._v("Wiki：Homebrew：Mac 下安装 Homebrew"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("Homebrew 主要分两部分：git repo（位于 GitHub）和二进制 bottles，这两者在国内访问都不太顺畅。接下来演示如何使用阿里云来加速这两部分的下载。")]),s._v(" "),a("h2",{attrs:{id:"使用-阿里云-的-homebrew-镜像源进行加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-阿里云-的-homebrew-镜像源进行加速"}},[s._v("#")]),s._v(" 使用 阿里云 的 Homebrew 镜像源进行加速")]),s._v(" "),a("p",[s._v("如果你没有更换过镜像源，执行 brew 命令安装应用的时候，跟以下 3 个仓库地址有关：")]),s._v(" "),a("ul",[a("li",[s._v("brew.git")]),s._v(" "),a("li",[s._v("homebrew-core.git")]),s._v(" "),a("li",[s._v("homebrew-bottles")])]),s._v(" "),a("p",[s._v("通过以下操作将这 3 个仓库地址全部替换为阿里云提供的地址。")]),s._v(" "),a("h2",{attrs:{id:"更换-brew-git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换-brew-git"}},[s._v("#")]),s._v(" 更换 brew.git")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("brew --repo"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"更换-homebrew-core-git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换-homebrew-core-git"}},[s._v("#")]),s._v(" 更换 homebrew-core.git")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("brew --repo"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/Library/Taps/homebrew/homebrew-core"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("执行上述命令之后，请执行更新命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("brew update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此时可以执行 "),a("code",[s._v("brew config")]),s._v(" 命令，查看配置信息：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("HOMEBREW_VERSION: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v(".2\nORIGIN: https://mirrors.aliyun.com/homebrew/brew.git\nHEAD: 13f508d0dc8ada1726ee09a750285d7447ac3df4\nLast commit: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago\nCore tap ORIGIN: https://mirrors.aliyun.com/homebrew/homebrew-core.git\nCore tap HEAD: d0cd83f4051fe5b07f519587b794eaf6f1a0dffe\nCore tap last commit: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" hours ago\nHOMEBREW_PREFIX: /usr/local\nCPU: dodeca-core "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-bit kabylake\nHomebrew Ruby: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.6")]),s._v(".3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/Homebrew/Library/Homebrew/vendor/portable-ruby/2.6.3/bin/ruby\nClang: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v("\nGit: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.19")]),s._v(".2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/bin/git\nCurl: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.54")]),s._v(".0 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/bin/curl\nmacOS: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.14")]),s._v(".6-x86_64\nCLT: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.3")]),s._v(".0.0.1.1562985497\nXcode: N/A\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"更换-homebrew-bottles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换-homebrew-bottles"}},[s._v("#")]),s._v(" 更换 homebrew-bottles")]),s._v(" "),a("p",[s._v("接下来是二进制文件下载的设置。")]),s._v(" "),a("p",[s._v("这与你当前 macOS 系统使用的 shell 版本有关系，执行以下命令查看 Shell 版本：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$SHELL")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("根据版本不同，会输出 2 种结果，/bin/zsh 或 /bin/bash，根据类型进行操作即可")])]),s._v(" "),a("h3",{attrs:{id:"bin-zsh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bin-zsh"}},[s._v("#")]),s._v(" /bin/zsh")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.zshrc\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.zshrc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"bin-bash-结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bin-bash-结果"}},[s._v("#")]),s._v(" /bin/bash 结果")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.bash_profile\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("到这里，更换 Homebrew 默认源的所有操作啦，尽情地去 "),a("strong",[s._v("brew install")]),s._v(" 吧！")]),s._v(" "),a("h2",{attrs:{id:"恢复默认配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#恢复默认配置"}},[s._v("#")]),s._v(" 恢复默认配置")]),s._v(" "),a("p",[s._v("出于某些场景, 可能需要回退到默认配置, 你可以通过下述方式回退到默认配置。\n首先执行下述命令:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置brew.git:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("brew --repo"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url origin https://github.com/Homebrew/brew.git\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置homebrew-core.git:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("brew --repo"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('/Library/Taps/homebrew/homebrew-core"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url origin https://github.com/Homebrew/homebrew-core.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("然后删掉 HOMEBREW_BOTTLE_DOMAIN 环境变量,将你终端文件 "),a("code",[s._v("~/.bash_profile")]),s._v(" 或者 "),a("code",[s._v("~/.zshrc")]),s._v(" 中")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("HOMEBREW_BOTTLE_DOMAIN\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("行删掉, 并执行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.zshrc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://phpdever.com/2019/08/02/homebrew-replace-aliyun/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://phpdever.com/2019/08/02/homebrew-r..."),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://learnku.com/mac/wikis/39228",target:"_blank",rel:"noopener noreferrer"}},[s._v("Homebrew：Homebrew 更换阿里云镜像加速 | Mac 用户论坛"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=t.exports}}]);